

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>watchme.watchers.gpu.pynvml &mdash; WatchMe Python 11 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../assets/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../assets/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../assets/jquery.js"></script>
        <script type="text/javascript" src="../../../../assets/underscore.js"></script>
        <script type="text/javascript" src="../../../../assets/doctools.js"></script>
        <script type="text/javascript" src="../../../../assets/language_data.js"></script>
    
    <script type="text/javascript" src="../../../../assets/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../assets/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../assets/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> WatchMe Python
          

          
            
            <img src="../../../../assets/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../source/watchme.html">watchme package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">CHANGELOG</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">WatchMe Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../../watchme.html">watchme</a> &raquo;</li>
        
          <li><a href="../../watchers.html">watchme.watchers</a> &raquo;</li>
        
          <li><a href="../gpu.html">watchme.watchers.gpu</a> &raquo;</li>
        
      <li>watchme.watchers.gpu.pynvml</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for watchme.watchers.gpu.pynvml</h1><div class="highlight"><pre>
<span></span><span class="sd">&#39;&#39;&#39;</span>

<span class="sd">Copyright (C) 2019 Vanessa Sochat.</span>

<span class="sd">This Source Code Form is subject to the terms of the</span>
<span class="sd">Mozilla Public License, v. 2.0. If a copy of the MPL was not distributed</span>
<span class="sd">with this file, You can obtain one at http://mozilla.org/MPL/2.0/.</span>

<span class="sd">The original license (2011-2015) is included below.</span>


<span class="sd">&#39;&#39;&#39;</span>

<span class="c1">#####</span>
<span class="c1"># Copyright (c) 2011-2015, NVIDIA Corporation.  All rights reserved.</span>
<span class="c1">#</span>
<span class="c1"># Redistribution and use in source and binary forms, with or without</span>
<span class="c1"># modification, are permitted provided that the following conditions are met:</span>
<span class="c1"># </span>
<span class="c1">#    * Redistributions of source code must retain the above copyright notice,</span>
<span class="c1">#      this list of conditions and the following disclaimer.</span>
<span class="c1">#    * Redistributions in binary form must reproduce the above copyright</span>
<span class="c1">#      notice, this list of conditions and the following disclaimer in the</span>
<span class="c1">#      documentation and/or other materials provided with the distribution.</span>
<span class="c1">#    * Neither the name of the NVIDIA Corporation nor the names of its</span>
<span class="c1">#      contributors may be used to endorse or promote products derived from</span>
<span class="c1">#      this software without specific prior written permission.</span>
<span class="c1">#</span>
<span class="c1"># THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span>
<span class="c1"># AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<span class="c1"># IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<span class="c1"># ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE</span>
<span class="c1"># LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span>
<span class="c1"># CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF </span>
<span class="c1"># SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS </span>
<span class="c1"># INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span>
<span class="c1"># CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) </span>
<span class="c1"># ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF </span>
<span class="c1"># THE POSSIBILITY OF SUCH DAMAGE.</span>
<span class="c1">#####</span>



<span class="c1">##</span>
<span class="c1"># Python bindings for the NVML library</span>
<span class="c1">##</span>
<span class="kn">from</span> <span class="nn">ctypes</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">byref</span><span class="p">,</span>
    <span class="n">CDLL</span><span class="p">,</span>
    <span class="n">create_string_buffer</span><span class="p">,</span>
    <span class="n">c_char_p</span><span class="p">,</span>
    <span class="n">c_char</span><span class="p">,</span>
    <span class="n">c_int</span><span class="p">,</span>
    <span class="n">c_double</span><span class="p">,</span>
    <span class="n">c_uint</span><span class="p">,</span>
    <span class="n">c_ulong</span><span class="p">,</span>
    <span class="n">c_ulonglong</span><span class="p">,</span>
    <span class="n">POINTER</span><span class="p">,</span>
    <span class="n">Structure</span><span class="p">,</span>
    <span class="n">Union</span>
<span class="p">)</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">string</span>
    
<span class="c1">## C Type mappings ##</span>
<span class="c1">## Enums</span>
<span class="n">_nvmlEnableState_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_FEATURE_DISABLED</span>    <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_FEATURE_ENABLED</span>     <span class="o">=</span> <span class="mi">1</span>

<span class="n">_nvmlBrandType_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_BRAND_UNKNOWN</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_BRAND_QUADRO</span>  <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_BRAND_TESLA</span>   <span class="o">=</span> <span class="mi">2</span>
<span class="n">NVML_BRAND_NVS</span>     <span class="o">=</span> <span class="mi">3</span>
<span class="n">NVML_BRAND_GRID</span>    <span class="o">=</span> <span class="mi">4</span>
<span class="n">NVML_BRAND_GEFORCE</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">NVML_BRAND_COUNT</span>   <span class="o">=</span> <span class="mi">6</span>

<span class="n">_nvmlTemperatureThresholds_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_TEMPERATURE_THRESHOLD_SHUTDOWN</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_TEMPERATURE_THRESHOLD_SLOWDOWN</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_TEMPERATURE_THRESHOLD_COUNT</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">_nvmlTemperatureSensors_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_TEMPERATURE_GPU</span>     <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_TEMPERATURE_COUNT</span>   <span class="o">=</span> <span class="mi">1</span>

<span class="n">_nvmlComputeMode_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_COMPUTEMODE_DEFAULT</span>           <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_COMPUTEMODE_EXCLUSIVE_THREAD</span>  <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_COMPUTEMODE_PROHIBITED</span>        <span class="o">=</span> <span class="mi">2</span>
<span class="n">NVML_COMPUTEMODE_EXCLUSIVE_PROCESS</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">NVML_COMPUTEMODE_COUNT</span>             <span class="o">=</span> <span class="mi">4</span>

<span class="n">_nvmlMemoryLocation_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_MEMORY_LOCATION_L1_CACHE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_MEMORY_LOCATION_L2_CACHE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_MEMORY_LOCATION_DEVICE_MEMORY</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">NVML_MEMORY_LOCATION_REGISTER_FILE</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">NVML_MEMORY_LOCATION_TEXTURE_MEMORY</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">NVML_MEMORY_LOCATION_COUNT</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c1"># These are deprecated, instead use _nvmlMemoryErrorType_t</span>
<span class="n">_nvmlEccBitType_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_SINGLE_BIT_ECC</span>    <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_DOUBLE_BIT_ECC</span>    <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_ECC_ERROR_TYPE_COUNT</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">_nvmlEccCounterType_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_VOLATILE_ECC</span>      <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_AGGREGATE_ECC</span>     <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_ECC_COUNTER_TYPE_COUNT</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">_nvmlMemoryErrorType_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_MEMORY_ERROR_TYPE_CORRECTED</span>   <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_MEMORY_ERROR_TYPE_UNCORRECTED</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_MEMORY_ERROR_TYPE_COUNT</span>       <span class="o">=</span> <span class="mi">2</span>

<span class="n">_nvmlClockType_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_CLOCK_GRAPHICS</span>  <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_CLOCK_SM</span>        <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_CLOCK_MEM</span>       <span class="o">=</span> <span class="mi">2</span>
<span class="n">NVML_CLOCK_COUNT</span>     <span class="o">=</span> <span class="mi">3</span>

<span class="n">_nvmlDriverModel_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_DRIVER_WDDM</span>       <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_DRIVER_WDM</span>        <span class="o">=</span> <span class="mi">1</span>

<span class="n">_nvmlPstates_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_PSTATE_0</span>               <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_PSTATE_1</span>               <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_PSTATE_2</span>               <span class="o">=</span> <span class="mi">2</span>
<span class="n">NVML_PSTATE_3</span>               <span class="o">=</span> <span class="mi">3</span>
<span class="n">NVML_PSTATE_4</span>               <span class="o">=</span> <span class="mi">4</span>
<span class="n">NVML_PSTATE_5</span>               <span class="o">=</span> <span class="mi">5</span>
<span class="n">NVML_PSTATE_6</span>               <span class="o">=</span> <span class="mi">6</span>
<span class="n">NVML_PSTATE_7</span>               <span class="o">=</span> <span class="mi">7</span>
<span class="n">NVML_PSTATE_8</span>               <span class="o">=</span> <span class="mi">8</span>
<span class="n">NVML_PSTATE_9</span>               <span class="o">=</span> <span class="mi">9</span>
<span class="n">NVML_PSTATE_10</span>              <span class="o">=</span> <span class="mi">10</span>
<span class="n">NVML_PSTATE_11</span>              <span class="o">=</span> <span class="mi">11</span>
<span class="n">NVML_PSTATE_12</span>              <span class="o">=</span> <span class="mi">12</span>
<span class="n">NVML_PSTATE_13</span>              <span class="o">=</span> <span class="mi">13</span>
<span class="n">NVML_PSTATE_14</span>              <span class="o">=</span> <span class="mi">14</span>
<span class="n">NVML_PSTATE_15</span>              <span class="o">=</span> <span class="mi">15</span>
<span class="n">NVML_PSTATE_UNKNOWN</span>         <span class="o">=</span> <span class="mi">32</span>

<span class="n">_nvmlInforomObject_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_INFOROM_OEM</span>            <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_INFOROM_ECC</span>            <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_INFOROM_POWER</span>          <span class="o">=</span> <span class="mi">2</span>
<span class="n">NVML_INFOROM_COUNT</span>          <span class="o">=</span> <span class="mi">3</span>

<span class="n">_nvmlReturn_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_SUCCESS</span>                   <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_ERROR_UNINITIALIZED</span>       <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_ERROR_INVALID_ARGUMENT</span>    <span class="o">=</span> <span class="mi">2</span>
<span class="n">NVML_ERROR_NOT_SUPPORTED</span>       <span class="o">=</span> <span class="mi">3</span>
<span class="n">NVML_ERROR_NO_PERMISSION</span>       <span class="o">=</span> <span class="mi">4</span>
<span class="n">NVML_ERROR_ALREADY_INITIALIZED</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">NVML_ERROR_NOT_FOUND</span>           <span class="o">=</span> <span class="mi">6</span>
<span class="n">NVML_ERROR_INSUFFICIENT_SIZE</span>   <span class="o">=</span> <span class="mi">7</span>
<span class="n">NVML_ERROR_INSUFFICIENT_POWER</span>  <span class="o">=</span> <span class="mi">8</span>
<span class="n">NVML_ERROR_DRIVER_NOT_LOADED</span>   <span class="o">=</span> <span class="mi">9</span>
<span class="n">NVML_ERROR_TIMEOUT</span>             <span class="o">=</span> <span class="mi">10</span>
<span class="n">NVML_ERROR_IRQ_ISSUE</span>           <span class="o">=</span> <span class="mi">11</span>
<span class="n">NVML_ERROR_LIBRARY_NOT_FOUND</span>   <span class="o">=</span> <span class="mi">12</span>
<span class="n">NVML_ERROR_FUNCTION_NOT_FOUND</span>  <span class="o">=</span> <span class="mi">13</span>
<span class="n">NVML_ERROR_CORRUPTED_INFOROM</span>   <span class="o">=</span> <span class="mi">14</span>
<span class="n">NVML_ERROR_GPU_IS_LOST</span>         <span class="o">=</span> <span class="mi">15</span>
<span class="n">NVML_ERROR_RESET_REQUIRED</span>      <span class="o">=</span> <span class="mi">16</span>
<span class="n">NVML_ERROR_OPERATING_SYSTEM</span>    <span class="o">=</span> <span class="mi">17</span>
<span class="n">NVML_ERROR_LIB_RM_VERSION_MISMATCH</span> <span class="o">=</span> <span class="mi">18</span>
<span class="n">NVML_ERROR_UNKNOWN</span>             <span class="o">=</span> <span class="mi">999</span>

<span class="n">_nvmlFanState_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_FAN_NORMAL</span>             <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_FAN_FAILED</span>             <span class="o">=</span> <span class="mi">1</span>

<span class="n">_nvmlLedColor_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_LED_COLOR_GREEN</span>        <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_LED_COLOR_AMBER</span>        <span class="o">=</span> <span class="mi">1</span>
     
<span class="n">_nvmlGpuOperationMode_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_GOM_ALL_ON</span>                 <span class="o">=</span> <span class="mi">0</span> 
<span class="n">NVML_GOM_COMPUTE</span>                <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_GOM_LOW_DP</span>                 <span class="o">=</span> <span class="mi">2</span>

<span class="n">_nvmlPageRetirementCause_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_PAGE_RETIREMENT_CAUSE_DOUBLE_BIT_ECC_ERROR</span>           <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_PAGE_RETIREMENT_CAUSE_MULTIPLE_SINGLE_BIT_ECC_ERRORS</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_PAGE_RETIREMENT_CAUSE_COUNT</span>                          <span class="o">=</span> <span class="mi">2</span>

<span class="n">_nvmlRestrictedAPI_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_RESTRICTED_API_SET_APPLICATION_CLOCKS</span>                <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_RESTRICTED_API_SET_AUTO_BOOSTED_CLOCKS</span>               <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_RESTRICTED_API_COUNT</span>                                 <span class="o">=</span> <span class="mi">2</span>

<span class="n">_nvmlBridgeChipType_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_BRIDGE_CHIP_PLX</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_BRIDGE_CHIP_BRO4</span> <span class="o">=</span> <span class="mi">1</span>      
<span class="n">NVML_MAX_PHYSICAL_BRIDGE</span> <span class="o">=</span> <span class="mi">128</span>

<span class="n">_nvmlValueType_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_VALUE_TYPE_DOUBLE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_VALUE_TYPE_UNSIGNED_INT</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_VALUE_TYPE_UNSIGNED_LONG</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">NVML_VALUE_TYPE_UNSIGNED_LONG_LONG</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">NVML_VALUE_TYPE_COUNT</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">_nvmlPerfPolicyType_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_PERF_POLICY_POWER</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_PERF_POLICY_THERMAL</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_PERF_POLICY_COUNT</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">_nvmlSamplingType_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_TOTAL_POWER_SAMPLES</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_GPU_UTILIZATION_SAMPLES</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_MEMORY_UTILIZATION_SAMPLES</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">NVML_ENC_UTILIZATION_SAMPLES</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">NVML_DEC_UTILIZATION_SAMPLES</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">NVML_PROCESSOR_CLK_SAMPLES</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">NVML_MEMORY_CLK_SAMPLES</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">NVML_SAMPLINGTYPE_COUNT</span> <span class="o">=</span> <span class="mi">7</span>

<span class="n">_nvmlPcieUtilCounter_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_PCIE_UTIL_TX_BYTES</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_PCIE_UTIL_RX_BYTES</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">NVML_PCIE_UTIL_COUNT</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">_nvmlGpuTopologyLevel_t</span> <span class="o">=</span> <span class="n">c_uint</span>
<span class="n">NVML_TOPOLOGY_INTERNAL</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">NVML_TOPOLOGY_SINGLE</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">NVML_TOPOLOGY_MULTIPLE</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">NVML_TOPOLOGY_HOSTBRIDGE</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">NVML_TOPOLOGY_CPU</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">NVML_TOPOLOGY_SYSTEM</span> <span class="o">=</span> <span class="mi">50</span>

<span class="c1"># C preprocessor defined values</span>
<span class="n">nvmlFlagDefault</span>             <span class="o">=</span> <span class="mi">0</span>
<span class="n">nvmlFlagForce</span>               <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># buffer size</span>
<span class="n">NVML_DEVICE_INFOROM_VERSION_BUFFER_SIZE</span>      <span class="o">=</span> <span class="mi">16</span>
<span class="n">NVML_DEVICE_UUID_BUFFER_SIZE</span>                 <span class="o">=</span> <span class="mi">80</span>
<span class="n">NVML_SYSTEM_DRIVER_VERSION_BUFFER_SIZE</span>       <span class="o">=</span> <span class="mi">81</span>
<span class="n">NVML_SYSTEM_NVML_VERSION_BUFFER_SIZE</span>         <span class="o">=</span> <span class="mi">80</span>
<span class="n">NVML_DEVICE_NAME_BUFFER_SIZE</span>                 <span class="o">=</span> <span class="mi">64</span>
<span class="n">NVML_DEVICE_SERIAL_BUFFER_SIZE</span>               <span class="o">=</span> <span class="mi">30</span>
<span class="n">NVML_DEVICE_VBIOS_VERSION_BUFFER_SIZE</span>        <span class="o">=</span> <span class="mi">32</span>
<span class="n">NVML_DEVICE_PCI_BUS_ID_BUFFER_SIZE</span>           <span class="o">=</span> <span class="mi">16</span>

<span class="n">NVML_VALUE_NOT_AVAILABLE_ulonglong</span> <span class="o">=</span> <span class="n">c_ulonglong</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">NVML_VALUE_NOT_AVAILABLE_uint</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">## Lib loading ##</span>
<span class="n">nvmlLib</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">libLoadLock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
<span class="n">_nvmlLib_refcount</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Incremented on each nvmlInit and decremented on nvmlShutdown</span>

<span class="c1">## Error Checking ##</span>
<div class="viewcode-block" id="NVMLError"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.NVMLError">[docs]</a><span class="k">class</span> <span class="nc">NVMLError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="n">_valClassMapping</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="c1"># List of currently known error codes</span>
    <span class="n">_errcode_to_string</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">NVML_ERROR_UNINITIALIZED</span><span class="p">:</span>       <span class="s2">&quot;Uninitialized&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_INVALID_ARGUMENT</span><span class="p">:</span>    <span class="s2">&quot;Invalid Argument&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_NOT_SUPPORTED</span><span class="p">:</span>       <span class="s2">&quot;Not Supported&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_NO_PERMISSION</span><span class="p">:</span>       <span class="s2">&quot;Insufficient Permissions&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_ALREADY_INITIALIZED</span><span class="p">:</span> <span class="s2">&quot;Already Initialized&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_NOT_FOUND</span><span class="p">:</span>           <span class="s2">&quot;Not Found&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_INSUFFICIENT_SIZE</span><span class="p">:</span>   <span class="s2">&quot;Insufficient Size&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_INSUFFICIENT_POWER</span><span class="p">:</span>  <span class="s2">&quot;Insufficient External Power&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_DRIVER_NOT_LOADED</span><span class="p">:</span>   <span class="s2">&quot;Driver Not Loaded&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_TIMEOUT</span><span class="p">:</span>             <span class="s2">&quot;Timeout&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_IRQ_ISSUE</span><span class="p">:</span>           <span class="s2">&quot;Interrupt Request Issue&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_LIBRARY_NOT_FOUND</span><span class="p">:</span>   <span class="s2">&quot;NVML Shared Library Not Found&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_FUNCTION_NOT_FOUND</span><span class="p">:</span>  <span class="s2">&quot;Function Not Found&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_CORRUPTED_INFOROM</span><span class="p">:</span>   <span class="s2">&quot;Corrupted infoROM&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_GPU_IS_LOST</span><span class="p">:</span>         <span class="s2">&quot;GPU is lost&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_RESET_REQUIRED</span><span class="p">:</span>      <span class="s2">&quot;GPU requires restart&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_OPERATING_SYSTEM</span><span class="p">:</span>    <span class="s2">&quot;The operating system has blocked the request.&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_LIB_RM_VERSION_MISMATCH</span><span class="p">:</span> <span class="s2">&quot;RM has detected an NVML/RM version mismatch.&quot;</span><span class="p">,</span>
        <span class="n">NVML_ERROR_UNKNOWN</span><span class="p">:</span>             <span class="s2">&quot;Unknown Error&quot;</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span> <span class="c1"># pylint: disable=bad-classmethod-argument</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Maps value to a proper subclass of NVMLError.</span>
<span class="sd">        See _extractNVMLErrorsAsClasses function for more details</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">typ</span> <span class="o">==</span> <span class="n">NVMLError</span><span class="p">:</span>
            <span class="n">typ</span> <span class="o">=</span> <span class="n">NVMLError</span><span class="o">.</span><span class="n">_valClassMapping</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">typ</span><span class="p">)</span> <span class="c1"># pylint: disable=self-cls-assignment</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="ne">Exception</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">typ</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">obj</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">NVMLError</span><span class="o">.</span><span class="n">_errcode_to_string</span><span class="p">:</span>
                <span class="n">NVMLError</span><span class="o">.</span><span class="n">_errcode_to_string</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">nvmlErrorString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">NVMLError</span><span class="o">.</span><span class="n">_errcode_to_string</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;NVML Error with code </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">value</span></div>

<span class="k">def</span> <span class="nf">_extractNVMLErrorsAsClasses</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;Generates a hierarchy of classes on top of NVMLError class.</span>

<span class="sd">    Each NVML Error gets a new NVMLError subclass. This way try,</span>
<span class="sd">    except blocks can filter appropriate exceptions more easily.</span>

<span class="sd">    NVMLError is a parent class. Each NVML_ERROR_* gets it&#39;s own subclass.</span>
<span class="sd">    e.g. NVML_ERROR_ALREADY_INITIALIZED will be turned into NVMLError_AlreadyInitialized</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">this_module</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span>
    <span class="n">nvmlErrorsNames</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;NVML_ERROR_&quot;</span><span class="p">),</span> <span class="nb">dir</span><span class="p">(</span><span class="n">this_module</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">err_name</span> <span class="ow">in</span> <span class="n">nvmlErrorsNames</span><span class="p">:</span>
        <span class="c1"># e.g. Turn NVML_ERROR_ALREADY_INITIALIZED into NVMLError_AlreadyInitialized</span>
        <span class="n">class_name</span> <span class="o">=</span> <span class="s2">&quot;NVMLError_&quot;</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">capwords</span><span class="p">(</span><span class="n">err_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;NVML_ERROR_&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">err_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">this_module</span><span class="p">,</span> <span class="n">err_name</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">gen_new</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">new</span><span class="p">(</span><span class="n">typ</span><span class="p">):</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="n">NVMLError</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">typ</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="c1"># pylint: disable=too-many-function-args</span>
                <span class="k">return</span> <span class="n">obj</span>
            <span class="k">return</span> <span class="n">new</span>
        <span class="n">new_error_class</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">class_name</span><span class="p">,</span> <span class="p">(</span><span class="n">NVMLError</span><span class="p">,),</span> <span class="p">{</span><span class="s1">&#39;__new__&#39;</span><span class="p">:</span> <span class="n">gen_new</span><span class="p">(</span><span class="n">err_val</span><span class="p">)})</span>
        <span class="n">new_error_class</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">=</span> <span class="vm">__name__</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">this_module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">,</span> <span class="n">new_error_class</span><span class="p">)</span>
        <span class="n">NVMLError</span><span class="o">.</span><span class="n">_valClassMapping</span><span class="p">[</span><span class="n">err_val</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_error_class</span>
<span class="n">_extractNVMLErrorsAsClasses</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="n">NVML_SUCCESS</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span>

<span class="c1">## Function access ##</span>
<span class="n">_nvmlGetFunctionPointer_cache</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span> <span class="c1"># function pointers are cached to prevent unnecessary libLoadLock locking</span>
<span class="k">def</span> <span class="nf">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">nvmlLib</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">_nvmlGetFunctionPointer_cache</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_nvmlGetFunctionPointer_cache</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    
    <span class="n">libLoadLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># ensure library was loaded</span>
        <span class="k">if</span> <span class="n">nvmlLib</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">NVML_ERROR_UNINITIALIZED</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_nvmlGetFunctionPointer_cache</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">nvmlLib</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_nvmlGetFunctionPointer_cache</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">NVML_ERROR_FUNCTION_NOT_FOUND</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># lock is always freed</span>
        <span class="n">libLoadLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>

<span class="c1">## Alternative object</span>
<span class="c1"># Allows the object to be printed</span>
<span class="c1"># Allows mismatched types to be assigned</span>
<span class="c1">#  - like None when the Structure variant requires c_uint</span>
<div class="viewcode-block" id="nvmlFriendlyObject"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlFriendlyObject">[docs]</a><span class="k">class</span> <span class="nc">nvmlFriendlyObject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">dictionary</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">[</span><span class="n">x</span><span class="p">])</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div>

<div class="viewcode-block" id="nvmlStructToFriendlyObject"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlStructToFriendlyObject">[docs]</a><span class="k">def</span> <span class="nf">nvmlStructToFriendlyObject</span><span class="p">(</span><span class="n">struct</span><span class="p">):</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">struct</span><span class="o">.</span><span class="n">_fields_</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">struct</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        <span class="n">d</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">nvmlFriendlyObject</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj</span></div>

<span class="c1"># pack the object so it can be passed to the NVML library</span>
<div class="viewcode-block" id="nvmlFriendlyObjectToStruct"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlFriendlyObjectToStruct">[docs]</a><span class="k">def</span> <span class="nf">nvmlFriendlyObjectToStruct</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">_fields_</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">model</span></div>

<span class="c1">## Unit structures</span>
<div class="viewcode-block" id="struct_c_nvmlUnit_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.struct_c_nvmlUnit_t">[docs]</a><span class="k">class</span> <span class="nc">struct_c_nvmlUnit_t</span><span class="p">(</span><span class="n">Structure</span><span class="p">):</span>
    <span class="k">pass</span> <span class="c1"># opaque handle</span></div>
<span class="n">c_nvmlUnit_t</span> <span class="o">=</span> <span class="n">POINTER</span><span class="p">(</span><span class="n">struct_c_nvmlUnit_t</span><span class="p">)</span>
    
<span class="k">class</span> <span class="nc">_PrintableStructure</span><span class="p">(</span><span class="n">Structure</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Abstract class that produces nicer __str__ output than ctypes.Structure.</span>
<span class="sd">       e.g. instead of:</span>
<span class="sd">          &gt;&gt;&gt; print(str(obj))</span>
<span class="sd">             &lt;class_name object at 0x7fdf82fef9e0&gt;</span>
<span class="sd">       this class will print</span>
<span class="sd">         class_name(field_name: formatted_value, field_name: formatted_value)</span>
<span class="sd">         _fmt_ dictionary of &lt;str _field_ name&gt; -&gt; &lt;str format&gt;</span>
<span class="sd">        e.g. class that has _field_ &#39;hex_value&#39;, c_uint could be formatted with</span>
<span class="sd">       _fmt_ = {&quot;hex_value&quot; : &quot;%08X&quot;}</span>
<span class="sd">       to produce nicer output.</span>
<span class="sd">       Default fomratting string for all fields can be set with key &quot;&lt;default&gt;&quot; like:</span>
<span class="sd">       _fmt_ = {&quot;&lt;default&gt;&quot; : &quot;%d MHz&quot;} # e.g all values are numbers in MHz.</span>
<span class="sd">       If not set it&#39;s assumed to be just &quot;%s&quot;</span>
<span class="sd">      Exact format of returned str from this class is subject to change in the future.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">_fmt_</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields_</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fmt_</span><span class="p">:</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fmt_</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">elif</span> <span class="s2">&quot;&lt;default&gt;&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fmt_</span><span class="p">:</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fmt_</span><span class="p">[</span><span class="s2">&quot;&lt;default&gt;&quot;</span><span class="p">]</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: &quot;</span> <span class="o">+</span> <span class="n">fmt</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
    
<div class="viewcode-block" id="c_nvmlUnitInfo_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlUnitInfo_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlUnitInfo_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">c_char</span> <span class="o">*</span> <span class="mi">96</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="n">c_char</span> <span class="o">*</span> <span class="mi">96</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;serial&#39;</span><span class="p">,</span> <span class="n">c_char</span> <span class="o">*</span> <span class="mi">96</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;firmwareVersion&#39;</span><span class="p">,</span> <span class="n">c_char</span> <span class="o">*</span> <span class="mi">96</span><span class="p">),</span>
    <span class="p">]</span></div>

<div class="viewcode-block" id="c_nvmlLedState_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlLedState_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlLedState_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;cause&#39;</span><span class="p">,</span> <span class="n">c_char</span> <span class="o">*</span> <span class="mi">256</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="n">_nvmlLedColor_t</span><span class="p">),</span>
    <span class="p">]</span></div>

<div class="viewcode-block" id="c_nvmlPSUInfo_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlPSUInfo_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlPSUInfo_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="n">c_char</span> <span class="o">*</span> <span class="mi">256</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;voltage&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;power&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
    <span class="p">]</span></div>

<div class="viewcode-block" id="c_nvmlUnitFanInfo_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlUnitFanInfo_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlUnitFanInfo_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="n">_nvmlFanState_t</span><span class="p">),</span>
    <span class="p">]</span></div>

<div class="viewcode-block" id="c_nvmlUnitFanSpeeds_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlUnitFanSpeeds_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlUnitFanSpeeds_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;fans&#39;</span><span class="p">,</span> <span class="n">c_nvmlUnitFanInfo_t</span> <span class="o">*</span> <span class="mi">24</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">)</span>
    <span class="p">]</span></div>

<span class="c1">## Device structures</span>
<div class="viewcode-block" id="struct_c_nvmlDevice_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.struct_c_nvmlDevice_t">[docs]</a><span class="k">class</span> <span class="nc">struct_c_nvmlDevice_t</span><span class="p">(</span><span class="n">Structure</span><span class="p">):</span>
    <span class="k">pass</span> <span class="c1"># opaque handle</span></div>
<span class="n">c_nvmlDevice_t</span> <span class="o">=</span> <span class="n">POINTER</span><span class="p">(</span><span class="n">struct_c_nvmlDevice_t</span><span class="p">)</span>

<div class="viewcode-block" id="nvmlPciInfo_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlPciInfo_t">[docs]</a><span class="k">class</span> <span class="nc">nvmlPciInfo_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;busId&#39;</span><span class="p">,</span> <span class="n">c_char</span> <span class="o">*</span> <span class="mi">16</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;domain&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;bus&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;pciDeviceId&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        
        <span class="c1"># Added in 2.285</span>
        <span class="p">(</span><span class="s1">&#39;pciSubSystemId&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;reserved0&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;reserved1&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;reserved2&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;reserved3&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">_fmt_</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;domain&#39;</span>         <span class="p">:</span> <span class="s2">&quot;0x</span><span class="si">%04X</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s1">&#39;bus&#39;</span>            <span class="p">:</span> <span class="s2">&quot;0x</span><span class="si">%02X</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s1">&#39;device&#39;</span>         <span class="p">:</span> <span class="s2">&quot;0x</span><span class="si">%02X</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s1">&#39;pciDeviceId&#39;</span>    <span class="p">:</span> <span class="s2">&quot;0x</span><span class="si">%08X</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s1">&#39;pciSubSystemId&#39;</span> <span class="p">:</span> <span class="s2">&quot;0x</span><span class="si">%08X</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">}</span></div>

<div class="viewcode-block" id="c_nvmlMemory_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlMemory_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlMemory_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;total&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;free&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;used&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">_fmt_</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;&lt;default&gt;&#39;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> B&quot;</span><span class="p">}</span></div>

<div class="viewcode-block" id="c_nvmlBAR1Memory_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlBAR1Memory_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlBAR1Memory_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;bar1Total&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;bar1Free&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;bar1Used&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">_fmt_</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;&lt;default&gt;&#39;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> B&quot;</span><span class="p">}</span></div>

<span class="c1"># On Windows with the WDDM driver, usedGpuMemory is reported as None</span>
<span class="c1"># Code that processes this structure should check for None, I.E.</span>
<span class="c1">#</span>
<span class="c1"># if (info.usedGpuMemory == None):</span>
<span class="c1">#     # TODO handle the error</span>
<span class="c1">#     pass</span>
<span class="c1"># else:</span>
<span class="c1">#    print(&quot;Using %d MiB of memory&quot; % (info.usedGpuMemory / 1024 / 1024))</span>
<span class="c1">#</span>
<span class="c1"># See NVML documentation for more information</span>
<div class="viewcode-block" id="c_nvmlProcessInfo_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlProcessInfo_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlProcessInfo_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;pid&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;usedGpuMemory&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">_fmt_</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;usedGpuMemory&#39;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> B&quot;</span><span class="p">}</span></div>

<div class="viewcode-block" id="c_nvmlBridgeChipInfo_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlBridgeChipInfo_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlBridgeChipInfo_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="n">_nvmlBridgeChipType_t</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;fwVersion&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
    <span class="p">]</span></div>

<div class="viewcode-block" id="c_nvmlBridgeChipHierarchy_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlBridgeChipHierarchy_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlBridgeChipHierarchy_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;bridgeCount&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;bridgeChipInfo&#39;</span><span class="p">,</span> <span class="n">c_nvmlBridgeChipInfo_t</span> <span class="o">*</span> <span class="mi">128</span><span class="p">),</span>
    <span class="p">]</span>    </div>

<div class="viewcode-block" id="c_nvmlEccErrorCounts_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlEccErrorCounts_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlEccErrorCounts_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;l1Cache&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;l2Cache&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;deviceMemory&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;registerFile&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
    <span class="p">]</span></div>

<div class="viewcode-block" id="c_nvmlUtilization_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlUtilization_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlUtilization_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;gpu&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;memory&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">_fmt_</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;&lt;default&gt;&#39;</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> </span><span class="si">%%</span><span class="s2">&quot;</span><span class="p">}</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="c_nvmlHwbcEntry_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlHwbcEntry_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlHwbcEntry_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;hwbcId&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;firmwareVersion&#39;</span><span class="p">,</span> <span class="n">c_char</span> <span class="o">*</span> <span class="mi">32</span><span class="p">),</span>
    <span class="p">]</span></div>

<div class="viewcode-block" id="c_nvmlValue_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlValue_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlValue_t</span><span class="p">(</span><span class="n">Union</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;dVal&#39;</span><span class="p">,</span> <span class="n">c_double</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;uiVal&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ulVal&#39;</span><span class="p">,</span> <span class="n">c_ulong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;ullVal&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
    <span class="p">]</span></div>

<div class="viewcode-block" id="c_nvmlSample_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlSample_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlSample_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;timeStamp&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;sampleValue&#39;</span><span class="p">,</span> <span class="n">c_nvmlValue_t</span><span class="p">),</span>
    <span class="p">]</span></div>

<div class="viewcode-block" id="c_nvmlViolationTime_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlViolationTime_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlViolationTime_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;referenceTime&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;violationTime&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
    <span class="p">]</span></div>

<span class="c1">## Event structures</span>
<div class="viewcode-block" id="struct_c_nvmlEventSet_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.struct_c_nvmlEventSet_t">[docs]</a><span class="k">class</span> <span class="nc">struct_c_nvmlEventSet_t</span><span class="p">(</span><span class="n">Structure</span><span class="p">):</span>
    <span class="k">pass</span> <span class="c1"># opaque handle</span></div>
<span class="n">c_nvmlEventSet_t</span> <span class="o">=</span> <span class="n">POINTER</span><span class="p">(</span><span class="n">struct_c_nvmlEventSet_t</span><span class="p">)</span>

<span class="n">nvmlEventTypeSingleBitEccError</span>     <span class="o">=</span> <span class="mh">0x0000000000000001</span>
<span class="n">nvmlEventTypeDoubleBitEccError</span>     <span class="o">=</span> <span class="mh">0x0000000000000002</span>
<span class="n">nvmlEventTypePState</span>                <span class="o">=</span> <span class="mh">0x0000000000000004</span>
<span class="n">nvmlEventTypeXidCriticalError</span>      <span class="o">=</span> <span class="mh">0x0000000000000008</span>
<span class="n">nvmlEventTypeClock</span>                 <span class="o">=</span> <span class="mh">0x0000000000000010</span>
<span class="n">nvmlEventTypeNone</span>                  <span class="o">=</span> <span class="mh">0x0000000000000000</span>
<span class="n">nvmlEventTypeAll</span>                   <span class="o">=</span> <span class="p">(</span>
                                        <span class="n">nvmlEventTypeNone</span> <span class="o">|</span>
                                        <span class="n">nvmlEventTypeSingleBitEccError</span> <span class="o">|</span>
                                        <span class="n">nvmlEventTypeDoubleBitEccError</span> <span class="o">|</span>
                                        <span class="n">nvmlEventTypePState</span> <span class="o">|</span>
                                        <span class="n">nvmlEventTypeClock</span> <span class="o">|</span>
                                        <span class="n">nvmlEventTypeXidCriticalError</span>
                                     <span class="p">)</span>

<span class="c1">## Clock Throttle Reasons defines</span>
<span class="n">nvmlClocksThrottleReasonGpuIdle</span>           <span class="o">=</span> <span class="mh">0x0000000000000001</span>
<span class="n">nvmlClocksThrottleReasonApplicationsClocksSetting</span> <span class="o">=</span> <span class="mh">0x0000000000000002</span>
<span class="n">nvmlClocksThrottleReasonUserDefinedClocks</span>         <span class="o">=</span> <span class="n">nvmlClocksThrottleReasonApplicationsClocksSetting</span> <span class="c1"># deprecated, use nvmlClocksThrottleReasonApplicationsClocksSetting</span>
<span class="n">nvmlClocksThrottleReasonSwPowerCap</span>        <span class="o">=</span> <span class="mh">0x0000000000000004</span>
<span class="n">nvmlClocksThrottleReasonHwSlowdown</span>        <span class="o">=</span> <span class="mh">0x0000000000000008</span>
<span class="n">nvmlClocksThrottleReasonUnknown</span>           <span class="o">=</span> <span class="mh">0x8000000000000000</span>
<span class="n">nvmlClocksThrottleReasonNone</span>              <span class="o">=</span> <span class="mh">0x0000000000000000</span>
<span class="n">nvmlClocksThrottleReasonAll</span>               <span class="o">=</span> <span class="p">(</span>
                                               <span class="n">nvmlClocksThrottleReasonNone</span> <span class="o">|</span>
                                               <span class="n">nvmlClocksThrottleReasonGpuIdle</span> <span class="o">|</span>
                                               <span class="n">nvmlClocksThrottleReasonApplicationsClocksSetting</span> <span class="o">|</span>
                                               <span class="n">nvmlClocksThrottleReasonSwPowerCap</span> <span class="o">|</span>
                                               <span class="n">nvmlClocksThrottleReasonHwSlowdown</span> <span class="o">|</span>
                                               <span class="n">nvmlClocksThrottleReasonUnknown</span>
                                            <span class="p">)</span> 

<div class="viewcode-block" id="c_nvmlEventData_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlEventData_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlEventData_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;device&#39;</span><span class="p">,</span> <span class="n">c_nvmlDevice_t</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;eventType&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;eventData&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="n">_fmt_</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;eventType&#39;</span><span class="p">:</span> <span class="s2">&quot;0x</span><span class="si">%08X</span><span class="s2">&quot;</span><span class="p">}</span></div>

<div class="viewcode-block" id="c_nvmlAccountingStats_t"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.c_nvmlAccountingStats_t">[docs]</a><span class="k">class</span> <span class="nc">c_nvmlAccountingStats_t</span><span class="p">(</span><span class="n">_PrintableStructure</span><span class="p">):</span>
    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;gpuUtilization&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;memoryUtilization&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;maxMemoryUsage&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;startTime&#39;</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;isRunning&#39;</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;reserved&#39;</span><span class="p">,</span> <span class="n">c_uint</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
    <span class="p">]</span></div>

<span class="c1">## C function wrappers ##</span>
<div class="viewcode-block" id="nvmlInit"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlInit">[docs]</a><span class="k">def</span> <span class="nf">nvmlInit</span><span class="p">():</span>
    <span class="n">_LoadNvmlLibrary</span><span class="p">()</span>
    
    <span class="c1">#</span>
    <span class="c1"># Initialize the library</span>
    <span class="c1">#</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlInit_v2&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">()</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
   
    <span class="c1"># Atomically update refcount</span>
    <span class="k">global</span> <span class="n">_nvmlLib_refcount</span>
    <span class="n">libLoadLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
    <span class="n">_nvmlLib_refcount</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">libLoadLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">None</span></div>
    
<span class="k">def</span> <span class="nf">_LoadNvmlLibrary</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Load the library if it isn&#39;t loaded already</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">global</span> <span class="n">nvmlLib</span>
    
    <span class="k">if</span> <span class="n">nvmlLib</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># lock to ensure only one caller loads the library</span>
        <span class="n">libLoadLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># ensure the library still isn&#39;t loaded</span>
            <span class="k">if</span> <span class="n">nvmlLib</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;win&quot;</span><span class="p">:</span>
                        <span class="c1"># cdecl calling convention</span>
                        <span class="c1"># load nvml.dll from %ProgramFiles%/NVIDIA Corporation/NVSMI/nvml.dll</span>
                        <span class="n">nvmlLib</span> <span class="o">=</span> <span class="n">CDLL</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;ProgramFiles&quot;</span><span class="p">,</span> <span class="s2">&quot;C:/Program Files&quot;</span><span class="p">),</span> <span class="s2">&quot;NVIDIA Corporation/NVSMI/nvml.dll&quot;</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># assume linux</span>
                        <span class="n">nvmlLib</span> <span class="o">=</span> <span class="n">CDLL</span><span class="p">(</span><span class="s2">&quot;libnvidia-ml.so.1&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
                    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">NVML_ERROR_LIBRARY_NOT_FOUND</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">nvmlLib</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">NVML_ERROR_LIBRARY_NOT_FOUND</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># lock is always freed</span>
            <span class="n">libLoadLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
            
<div class="viewcode-block" id="nvmlShutdown"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlShutdown">[docs]</a><span class="k">def</span> <span class="nf">nvmlShutdown</span><span class="p">():</span>
    <span class="c1">#</span>
    <span class="c1"># Leave the library loaded, but shutdown the interface</span>
    <span class="c1">#</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlShutdown&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">()</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    
    <span class="c1"># Atomically update refcount</span>
    <span class="k">global</span> <span class="n">_nvmlLib_refcount</span>
    <span class="n">libLoadLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">_nvmlLib_refcount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">_nvmlLib_refcount</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">libLoadLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlErrorString"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlErrorString">[docs]</a><span class="k">def</span> <span class="nf">nvmlErrorString</span><span class="p">(</span><span class="n">result</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlErrorString&quot;</span><span class="p">)</span>
    <span class="n">fn</span><span class="o">.</span><span class="n">restype</span> <span class="o">=</span> <span class="n">c_char_p</span> <span class="c1"># otherwise return is an int</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlSystemGetNVMLVersion"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlSystemGetNVMLVersion">[docs]</a><span class="k">def</span> <span class="nf">nvmlSystemGetNVMLVersion</span><span class="p">():</span>
    <span class="n">c_version</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="n">NVML_SYSTEM_NVML_VERSION_BUFFER_SIZE</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlSystemGetNVMLVersion&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">c_version</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">NVML_SYSTEM_NVML_VERSION_BUFFER_SIZE</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_version</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlSystemGetProcessName"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlSystemGetProcessName">[docs]</a><span class="k">def</span> <span class="nf">nvmlSystemGetProcessName</span><span class="p">(</span><span class="n">pid</span><span class="p">):</span>
    <span class="n">c_name</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlSystemGetProcessName&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">c_uint</span><span class="p">(</span><span class="n">pid</span><span class="p">),</span> <span class="n">c_name</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">1024</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_name</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlSystemGetDriverVersion"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlSystemGetDriverVersion">[docs]</a><span class="k">def</span> <span class="nf">nvmlSystemGetDriverVersion</span><span class="p">():</span>
    <span class="n">c_version</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="n">NVML_SYSTEM_DRIVER_VERSION_BUFFER_SIZE</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlSystemGetDriverVersion&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">c_version</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">NVML_SYSTEM_DRIVER_VERSION_BUFFER_SIZE</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_version</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>


<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlSystemGetHicVersion"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlSystemGetHicVersion">[docs]</a><span class="k">def</span> <span class="nf">nvmlSystemGetHicVersion</span><span class="p">():</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">hics</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlSystemGetHicVersion&quot;</span><span class="p">)</span>
    
    <span class="c1"># get the count</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
    
    <span class="c1"># this should only fail with insufficient size</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="n">NVML_SUCCESS</span> <span class="ow">and</span>
        <span class="n">ret</span> <span class="o">!=</span> <span class="n">NVML_ERROR_INSUFFICIENT_SIZE</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    
    <span class="c1"># if there are no hics</span>
    <span class="k">if</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
    
    <span class="n">hic_array</span> <span class="o">=</span> <span class="n">c_nvmlHwbcEntry_t</span> <span class="o">*</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span>
    <span class="n">hics</span> <span class="o">=</span> <span class="n">hic_array</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="n">hics</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hics</span></div>

<span class="c1">## Unit get functions</span>
<div class="viewcode-block" id="nvmlUnitGetCount"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlUnitGetCount">[docs]</a><span class="k">def</span> <span class="nf">nvmlUnitGetCount</span><span class="p">():</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlUnitGetCount&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlUnitGetHandleByIndex"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlUnitGetHandleByIndex">[docs]</a><span class="k">def</span> <span class="nf">nvmlUnitGetHandleByIndex</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
    <span class="n">c_index</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">c_nvmlUnit_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlUnitGetHandleByIndex&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">c_index</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">unit</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">unit</span></div>

<div class="viewcode-block" id="nvmlUnitGetUnitInfo"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlUnitGetUnitInfo">[docs]</a><span class="k">def</span> <span class="nf">nvmlUnitGetUnitInfo</span><span class="p">(</span><span class="n">unit</span><span class="p">):</span>
    <span class="n">c_info</span> <span class="o">=</span> <span class="n">c_nvmlUnitInfo_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlUnitGetUnitInfo&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_info</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_info</span></div>

<div class="viewcode-block" id="nvmlUnitGetLedState"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlUnitGetLedState">[docs]</a><span class="k">def</span> <span class="nf">nvmlUnitGetLedState</span><span class="p">(</span><span class="n">unit</span><span class="p">):</span>
    <span class="n">c_state</span> <span class="o">=</span>  <span class="n">c_nvmlLedState_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlUnitGetLedState&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_state</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_state</span></div>

<div class="viewcode-block" id="nvmlUnitGetPsuInfo"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlUnitGetPsuInfo">[docs]</a><span class="k">def</span> <span class="nf">nvmlUnitGetPsuInfo</span><span class="p">(</span><span class="n">unit</span><span class="p">):</span>
    <span class="n">c_info</span> <span class="o">=</span> <span class="n">c_nvmlPSUInfo_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlUnitGetPsuInfo&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_info</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_info</span></div>

<div class="viewcode-block" id="nvmlUnitGetTemperature"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlUnitGetTemperature">[docs]</a><span class="k">def</span> <span class="nf">nvmlUnitGetTemperature</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
    <span class="n">c_temp</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlUnitGetTemperature&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="nb">type</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_temp</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_temp</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlUnitGetFanSpeedInfo"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlUnitGetFanSpeedInfo">[docs]</a><span class="k">def</span> <span class="nf">nvmlUnitGetFanSpeedInfo</span><span class="p">(</span><span class="n">unit</span><span class="p">):</span>
    <span class="n">c_speeds</span> <span class="o">=</span> <span class="n">c_nvmlUnitFanSpeeds_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlUnitGetFanSpeedInfo&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_speeds</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_speeds</span></div>
    
<span class="c1"># added to API</span>
<div class="viewcode-block" id="nvmlUnitGetDeviceCount"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlUnitGetDeviceCount">[docs]</a><span class="k">def</span> <span class="nf">nvmlUnitGetDeviceCount</span><span class="p">(</span><span class="n">unit</span><span class="p">):</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># query the unit to determine device count</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlUnitGetDevices&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">NVML_ERROR_INSUFFICIENT_SIZE</span><span class="p">:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">NVML_SUCCESS</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlUnitGetDevices"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlUnitGetDevices">[docs]</a><span class="k">def</span> <span class="nf">nvmlUnitGetDevices</span><span class="p">(</span><span class="n">unit</span><span class="p">):</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">nvmlUnitGetDeviceCount</span><span class="p">(</span><span class="n">unit</span><span class="p">))</span>
    <span class="n">device_array</span> <span class="o">=</span> <span class="n">c_nvmlDevice_t</span> <span class="o">*</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span>
    <span class="n">c_devices</span> <span class="o">=</span> <span class="n">device_array</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlUnitGetDevices&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="n">c_devices</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_devices</span></div>

<span class="c1">## Device get functions</span>
<div class="viewcode-block" id="nvmlDeviceGetCount"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetCount">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetCount</span><span class="p">():</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetCount_v2&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetHandleByIndex"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetHandleByIndex">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetHandleByIndex</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
    <span class="n">c_index</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">c_nvmlDevice_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetHandleByIndex_v2&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">c_index</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">device</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">device</span></div>

<div class="viewcode-block" id="nvmlDeviceGetHandleBySerial"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetHandleBySerial">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetHandleBySerial</span><span class="p">(</span><span class="n">serial</span><span class="p">):</span>
    <span class="n">c_serial</span> <span class="o">=</span> <span class="n">c_char_p</span><span class="p">(</span><span class="n">serial</span><span class="p">)</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">c_nvmlDevice_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetHandleBySerial&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">c_serial</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">device</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">device</span></div>

<div class="viewcode-block" id="nvmlDeviceGetHandleByUUID"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetHandleByUUID">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetHandleByUUID</span><span class="p">(</span><span class="n">uuid</span><span class="p">):</span>
    <span class="n">c_uuid</span> <span class="o">=</span> <span class="n">c_char_p</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">c_nvmlDevice_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetHandleByUUID&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">c_uuid</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">device</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">device</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetHandleByPciBusId"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetHandleByPciBusId">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetHandleByPciBusId</span><span class="p">(</span><span class="n">pciBusId</span><span class="p">):</span>
    <span class="n">c_busId</span> <span class="o">=</span> <span class="n">c_char_p</span><span class="p">(</span><span class="n">pciBusId</span><span class="p">)</span>
    <span class="n">device</span> <span class="o">=</span> <span class="n">c_nvmlDevice_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetHandleByPciBusId_v2&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">c_busId</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">device</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">device</span></div>

<div class="viewcode-block" id="nvmlDeviceGetName"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetName">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetName</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_name</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="n">NVML_DEVICE_NAME_BUFFER_SIZE</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetName&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_name</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">NVML_DEVICE_NAME_BUFFER_SIZE</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_name</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetBoardId"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetBoardId">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetBoardId</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_id</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetBoardId&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_id</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_id</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetMultiGpuBoard"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetMultiGpuBoard">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetMultiGpuBoard</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_multiGpu</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetMultiGpuBoard&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_multiGpu</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_multiGpu</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetBrand"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetBrand">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetBrand</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_type</span> <span class="o">=</span> <span class="n">_nvmlBrandType_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetBrand&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_type</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_type</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetSerial"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetSerial">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetSerial</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_serial</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="n">NVML_DEVICE_SERIAL_BUFFER_SIZE</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetSerial&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_serial</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">NVML_DEVICE_SERIAL_BUFFER_SIZE</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_serial</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetCpuAffinity"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetCpuAffinity">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetCpuAffinity</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">cpuSetSize</span><span class="p">):</span>
    <span class="n">affinity_array</span> <span class="o">=</span> <span class="n">c_ulonglong</span> <span class="o">*</span> <span class="n">cpuSetSize</span>
    <span class="n">c_affinity</span> <span class="o">=</span> <span class="n">affinity_array</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetCpuAffinity&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">cpuSetSize</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_affinity</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_affinity</span></div>

<div class="viewcode-block" id="nvmlDeviceSetCpuAffinity"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetCpuAffinity">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetCpuAffinity</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetCpuAffinity&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="nvmlDeviceClearCpuAffinity"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceClearCpuAffinity">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceClearCpuAffinity</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceClearCpuAffinity&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="nvmlDeviceGetMinorNumber"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetMinorNumber">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetMinorNumber</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_minor_number</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetMinorNumber&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_minor_number</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_minor_number</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetUUID"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetUUID">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetUUID</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_uuid</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="n">NVML_DEVICE_UUID_BUFFER_SIZE</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetUUID&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_uuid</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">NVML_DEVICE_UUID_BUFFER_SIZE</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_uuid</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetInforomVersion"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetInforomVersion">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetInforomVersion</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">infoRomObject</span><span class="p">):</span>
    <span class="n">c_version</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="n">NVML_DEVICE_INFOROM_VERSION_BUFFER_SIZE</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetInforomVersion&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlInforomObject_t</span><span class="p">(</span><span class="n">infoRomObject</span><span class="p">),</span>
	         <span class="n">c_version</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">NVML_DEVICE_INFOROM_VERSION_BUFFER_SIZE</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_version</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetInforomImageVersion"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetInforomImageVersion">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetInforomImageVersion</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_version</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="n">NVML_DEVICE_INFOROM_VERSION_BUFFER_SIZE</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetInforomImageVersion&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_version</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">NVML_DEVICE_INFOROM_VERSION_BUFFER_SIZE</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_version</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetInforomConfigurationChecksum"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetInforomConfigurationChecksum">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetInforomConfigurationChecksum</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_checksum</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetInforomConfigurationChecksum&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_checksum</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_checksum</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceValidateInforom"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceValidateInforom">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceValidateInforom</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceValidateInforom&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span> </div>

<div class="viewcode-block" id="nvmlDeviceGetDisplayMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetDisplayMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetDisplayMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_mode</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetDisplayMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_mode</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_mode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetDisplayActive"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetDisplayActive">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetDisplayActive</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_mode</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetDisplayActive&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_mode</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_mode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
    
<div class="viewcode-block" id="nvmlDeviceGetPersistenceMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPersistenceMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPersistenceMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_state</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPersistenceMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_state</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_state</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetPciInfo"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPciInfo">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPciInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_info</span> <span class="o">=</span> <span class="n">nvmlPciInfo_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPciInfo_v2&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_info</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_info</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetClockInfo"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetClockInfo">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetClockInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
    <span class="n">c_clock</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetClockInfo&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlClockType_t</span><span class="p">(</span><span class="nb">type</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_clock</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_clock</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlDeviceGetMaxClockInfo"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetMaxClockInfo">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetMaxClockInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
    <span class="n">c_clock</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetMaxClockInfo&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlClockType_t</span><span class="p">(</span><span class="nb">type</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_clock</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_clock</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetApplicationsClock"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetApplicationsClock">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetApplicationsClock</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
    <span class="n">c_clock</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetApplicationsClock&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlClockType_t</span><span class="p">(</span><span class="nb">type</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_clock</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_clock</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 5.319</span>
<div class="viewcode-block" id="nvmlDeviceGetDefaultApplicationsClock"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetDefaultApplicationsClock">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetDefaultApplicationsClock</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
    <span class="n">c_clock</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetDefaultApplicationsClock&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlClockType_t</span><span class="p">(</span><span class="nb">type</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_clock</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_clock</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetSupportedMemoryClocks"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetSupportedMemoryClocks">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetSupportedMemoryClocks</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="c1"># first call to get the size</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetSupportedMemoryClocks&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">NVML_SUCCESS</span><span class="p">:</span>
        <span class="c1"># special case, no clocks</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">elif</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">NVML_ERROR_INSUFFICIENT_SIZE</span><span class="p">:</span>
        <span class="c1"># typical case</span>
        <span class="n">clocks_array</span> <span class="o">=</span> <span class="n">c_uint</span> <span class="o">*</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span>
        <span class="n">c_clocks</span> <span class="o">=</span> <span class="n">clocks_array</span><span class="p">()</span>
        
        <span class="c1"># make the call again</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="n">c_clocks</span><span class="p">)</span>
        <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
        
        <span class="n">procs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="n">procs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_clocks</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">procs</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># error case</span>
        <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetSupportedGraphicsClocks"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetSupportedGraphicsClocks">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetSupportedGraphicsClocks</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">memoryClockMHz</span><span class="p">):</span>
    <span class="c1"># first call to get the size</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetSupportedGraphicsClocks&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">memoryClockMHz</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">NVML_SUCCESS</span><span class="p">:</span>
        <span class="c1"># special case, no clocks</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">elif</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">NVML_ERROR_INSUFFICIENT_SIZE</span><span class="p">:</span>
        <span class="c1"># typical case</span>
        <span class="n">clocks_array</span> <span class="o">=</span> <span class="n">c_uint</span> <span class="o">*</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span>
        <span class="n">c_clocks</span> <span class="o">=</span> <span class="n">clocks_array</span><span class="p">()</span>
        
        <span class="c1"># make the call again</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">memoryClockMHz</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="n">c_clocks</span><span class="p">)</span>
        <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
        
        <span class="n">procs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="n">procs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c_clocks</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">procs</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># error case</span>
        <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetFanSpeed"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetFanSpeed">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetFanSpeed</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_speed</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetFanSpeed&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_speed</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_speed</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetTemperature"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetTemperature">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetTemperature</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">sensor</span><span class="p">):</span>
    <span class="n">c_temp</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetTemperature&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlTemperatureSensors_t</span><span class="p">(</span><span class="n">sensor</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_temp</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_temp</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetTemperatureThreshold"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetTemperatureThreshold">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetTemperatureThreshold</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">threshold</span><span class="p">):</span>
    <span class="n">c_temp</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetTemperatureThreshold&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlTemperatureThresholds_t</span><span class="p">(</span><span class="n">threshold</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_temp</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_temp</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># DEPRECATED use nvmlDeviceGetPerformanceState</span>
<div class="viewcode-block" id="nvmlDeviceGetPowerState"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPowerState">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPowerState</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_pstate</span> <span class="o">=</span> <span class="n">_nvmlPstates_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPowerState&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_pstate</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_pstate</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetPerformanceState"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPerformanceState">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPerformanceState</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_pstate</span> <span class="o">=</span> <span class="n">_nvmlPstates_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPerformanceState&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_pstate</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_pstate</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetPowerManagementMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPowerManagementMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPowerManagementMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_pcapMode</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPowerManagementMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_pcapMode</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_pcapMode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetPowerManagementLimit"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPowerManagementLimit">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPowerManagementLimit</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_limit</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPowerManagementLimit&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_limit</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_limit</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetPowerManagementLimitConstraints"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPowerManagementLimitConstraints">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPowerManagementLimitConstraints</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_minLimit</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">c_maxLimit</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPowerManagementLimitConstraints&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_minLimit</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_maxLimit</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">c_minLimit</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">c_maxLimit</span><span class="o">.</span><span class="n">value</span><span class="p">]</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetPowerManagementDefaultLimit"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPowerManagementDefaultLimit">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPowerManagementDefaultLimit</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_limit</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPowerManagementDefaultLimit&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_limit</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_limit</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    

<span class="c1"># Added in 331</span>
<div class="viewcode-block" id="nvmlDeviceGetEnforcedPowerLimit"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetEnforcedPowerLimit">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetEnforcedPowerLimit</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_limit</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetEnforcedPowerLimit&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_limit</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_limit</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetPowerUsage"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPowerUsage">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPowerUsage</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_watts</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPowerUsage&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_watts</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_watts</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetGpuOperationMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetGpuOperationMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetGpuOperationMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_currState</span> <span class="o">=</span> <span class="n">_nvmlGpuOperationMode_t</span><span class="p">()</span>
    <span class="n">c_pendingState</span> <span class="o">=</span> <span class="n">_nvmlGpuOperationMode_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetGpuOperationMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_currState</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_pendingState</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">c_currState</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">c_pendingState</span><span class="o">.</span><span class="n">value</span><span class="p">]</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetCurrentGpuOperationMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetCurrentGpuOperationMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetCurrentGpuOperationMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">nvmlDeviceGetGpuOperationMode</span><span class="p">(</span><span class="n">handle</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetPendingGpuOperationMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPendingGpuOperationMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPendingGpuOperationMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">nvmlDeviceGetGpuOperationMode</span><span class="p">(</span><span class="n">handle</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetMemoryInfo"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetMemoryInfo">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetMemoryInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_memory</span> <span class="o">=</span> <span class="n">c_nvmlMemory_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetMemoryInfo&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_memory</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_memory</span></div>

<div class="viewcode-block" id="nvmlDeviceGetBAR1MemoryInfo"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetBAR1MemoryInfo">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetBAR1MemoryInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_bar1_memory</span> <span class="o">=</span> <span class="n">c_nvmlBAR1Memory_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetBAR1MemoryInfo&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_bar1_memory</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_bar1_memory</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetComputeMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetComputeMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetComputeMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_mode</span> <span class="o">=</span> <span class="n">_nvmlComputeMode_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetComputeMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_mode</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_mode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetEccMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetEccMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetEccMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_currState</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">c_pendingState</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetEccMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_currState</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_pendingState</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">c_currState</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">c_pendingState</span><span class="o">.</span><span class="n">value</span><span class="p">]</span></div>

<span class="c1"># added to API</span>
<div class="viewcode-block" id="nvmlDeviceGetCurrentEccMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetCurrentEccMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetCurrentEccMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">nvmlDeviceGetEccMode</span><span class="p">(</span><span class="n">handle</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span></div>

<span class="c1"># added to API</span>
<div class="viewcode-block" id="nvmlDeviceGetPendingEccMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPendingEccMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPendingEccMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">nvmlDeviceGetEccMode</span><span class="p">(</span><span class="n">handle</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="nvmlDeviceGetTotalEccErrors"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetTotalEccErrors">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetTotalEccErrors</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">errorType</span><span class="p">,</span> <span class="n">counterType</span><span class="p">):</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_ulonglong</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetTotalEccErrors&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlMemoryErrorType_t</span><span class="p">(</span><span class="n">errorType</span><span class="p">),</span>
	         <span class="n">_nvmlEccCounterType_t</span><span class="p">(</span><span class="n">counterType</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># This is deprecated, instead use nvmlDeviceGetMemoryErrorCounter</span>
<div class="viewcode-block" id="nvmlDeviceGetDetailedEccErrors"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetDetailedEccErrors">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetDetailedEccErrors</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">errorType</span><span class="p">,</span> <span class="n">counterType</span><span class="p">):</span>
    <span class="n">c_counts</span> <span class="o">=</span> <span class="n">c_nvmlEccErrorCounts_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetDetailedEccErrors&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlMemoryErrorType_t</span><span class="p">(</span><span class="n">errorType</span><span class="p">),</span>
	         <span class="n">_nvmlEccCounterType_t</span><span class="p">(</span><span class="n">counterType</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_counts</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_counts</span></div>
    
<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetMemoryErrorCounter"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetMemoryErrorCounter">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetMemoryErrorCounter</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">errorType</span><span class="p">,</span> <span class="n">counterType</span><span class="p">,</span> <span class="n">locationType</span><span class="p">):</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_ulonglong</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetMemoryErrorCounter&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span>
             <span class="n">_nvmlMemoryErrorType_t</span><span class="p">(</span><span class="n">errorType</span><span class="p">),</span>
             <span class="n">_nvmlEccCounterType_t</span><span class="p">(</span><span class="n">counterType</span><span class="p">),</span>
             <span class="n">_nvmlMemoryLocation_t</span><span class="p">(</span><span class="n">locationType</span><span class="p">),</span>
             <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetUtilizationRates"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetUtilizationRates">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetUtilizationRates</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_util</span> <span class="o">=</span> <span class="n">c_nvmlUtilization_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetUtilizationRates&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_util</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">c_util</span></div>

<div class="viewcode-block" id="nvmlDeviceGetEncoderUtilization"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetEncoderUtilization">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetEncoderUtilization</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_util</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">c_samplingPeriod</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetEncoderUtilization&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_util</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_samplingPeriod</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">c_util</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">c_samplingPeriod</span><span class="o">.</span><span class="n">value</span><span class="p">]</span></div>

<div class="viewcode-block" id="nvmlDeviceGetDecoderUtilization"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetDecoderUtilization">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetDecoderUtilization</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_util</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">c_samplingPeriod</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetDecoderUtilization&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_util</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_samplingPeriod</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">c_util</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">c_samplingPeriod</span><span class="o">.</span><span class="n">value</span><span class="p">]</span></div>

<div class="viewcode-block" id="nvmlDeviceGetPcieReplayCounter"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPcieReplayCounter">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPcieReplayCounter</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_replay</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPcieReplayCounter&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_replay</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_replay</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetDriverModel"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetDriverModel">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetDriverModel</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_currModel</span> <span class="o">=</span> <span class="n">_nvmlDriverModel_t</span><span class="p">()</span>
    <span class="n">c_pendingModel</span> <span class="o">=</span> <span class="n">_nvmlDriverModel_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetDriverModel&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_currModel</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_pendingModel</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">c_currModel</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">c_pendingModel</span><span class="o">.</span><span class="n">value</span><span class="p">]</span></div>

<span class="c1"># added to API</span>
<div class="viewcode-block" id="nvmlDeviceGetCurrentDriverModel"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetCurrentDriverModel">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetCurrentDriverModel</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">nvmlDeviceGetDriverModel</span><span class="p">(</span><span class="n">handle</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span></div>

<span class="c1"># added to API</span>
<div class="viewcode-block" id="nvmlDeviceGetPendingDriverModel"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPendingDriverModel">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPendingDriverModel</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">nvmlDeviceGetDriverModel</span><span class="p">(</span><span class="n">handle</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlDeviceGetVbiosVersion"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetVbiosVersion">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetVbiosVersion</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_version</span> <span class="o">=</span> <span class="n">create_string_buffer</span><span class="p">(</span><span class="n">NVML_DEVICE_VBIOS_VERSION_BUFFER_SIZE</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetVbiosVersion&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_version</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">NVML_DEVICE_VBIOS_VERSION_BUFFER_SIZE</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_version</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlDeviceGetComputeRunningProcesses"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetComputeRunningProcesses">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetComputeRunningProcesses</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="c1"># first call to get the size</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetComputeRunningProcesses&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">NVML_SUCCESS</span><span class="p">:</span>
        <span class="c1"># special case, no running processes</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">elif</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">NVML_ERROR_INSUFFICIENT_SIZE</span><span class="p">:</span>
        <span class="c1"># typical case</span>
        <span class="c1"># oversize the array incase more processes are created</span>
        <span class="n">c_count</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span>
        <span class="n">proc_array</span> <span class="o">=</span> <span class="n">c_nvmlProcessInfo_t</span> <span class="o">*</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span>
        <span class="n">c_procs</span> <span class="o">=</span> <span class="n">proc_array</span><span class="p">()</span>
        
        <span class="c1"># make the call again</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="n">c_procs</span><span class="p">)</span>
        <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
        
        <span class="n">procs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="c1"># use an alternative struct for this object</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">nvmlStructToFriendlyObject</span><span class="p">(</span><span class="n">c_procs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">usedGpuMemory</span> <span class="o">==</span> <span class="n">NVML_VALUE_NOT_AVAILABLE_ulonglong</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="c1"># special case for WDDM on Windows, see comment above</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">usedGpuMemory</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">procs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">procs</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># error case</span>
        <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetGraphicsRunningProcesses"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetGraphicsRunningProcesses">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetGraphicsRunningProcesses</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="c1"># first call to get the size</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetGraphicsRunningProcesses&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">NVML_SUCCESS</span><span class="p">:</span>
        <span class="c1"># special case, no running processes</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">elif</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">NVML_ERROR_INSUFFICIENT_SIZE</span><span class="p">:</span>
        <span class="c1"># typical case</span>
        <span class="c1"># oversize the array incase more processes are created</span>
        <span class="n">c_count</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span>
        <span class="n">proc_array</span> <span class="o">=</span> <span class="n">c_nvmlProcessInfo_t</span> <span class="o">*</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span>
        <span class="n">c_procs</span> <span class="o">=</span> <span class="n">proc_array</span><span class="p">()</span>
        
        <span class="c1"># make the call again</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="n">c_procs</span><span class="p">)</span>
        <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
        
        <span class="n">procs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="c1"># use an alternative struct for this object</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="n">nvmlStructToFriendlyObject</span><span class="p">(</span><span class="n">c_procs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">usedGpuMemory</span> <span class="o">==</span> <span class="n">NVML_VALUE_NOT_AVAILABLE_ulonglong</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="c1"># special case for WDDM on Windows, see comment above</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">usedGpuMemory</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">procs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">procs</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># error case</span>
        <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetAutoBoostedClocksEnabled"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetAutoBoostedClocksEnabled">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetAutoBoostedClocksEnabled</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_isEnabled</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">c_defaultIsEnabled</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetAutoBoostedClocksEnabled&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_isEnabled</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_defaultIsEnabled</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">c_isEnabled</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">c_defaultIsEnabled</span><span class="o">.</span><span class="n">value</span><span class="p">]</span></div>
    <span class="c1">#Throws NVML_ERROR_NOT_SUPPORTED if hardware doesn&#39;t support setting auto boosted clocks</span>

<span class="c1">## Set functions</span>
<div class="viewcode-block" id="nvmlUnitSetLedState"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlUnitSetLedState">[docs]</a><span class="k">def</span> <span class="nf">nvmlUnitSetLedState</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlUnitSetLedState&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">unit</span><span class="p">,</span> <span class="n">_nvmlLedColor_t</span><span class="p">(</span><span class="n">color</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="nvmlDeviceSetPersistenceMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetPersistenceMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetPersistenceMode</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetPersistenceMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlEnableState_t</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="nvmlDeviceSetComputeMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetComputeMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetComputeMode</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetComputeMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlComputeMode_t</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="nvmlDeviceSetEccMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetEccMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetEccMode</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetEccMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlEnableState_t</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="nvmlDeviceClearEccErrorCounts"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceClearEccErrorCounts">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceClearEccErrorCounts</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">counterType</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceClearEccErrorCounts&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlEccCounterType_t</span><span class="p">(</span><span class="n">counterType</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="nvmlDeviceSetDriverModel"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetDriverModel">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetDriverModel</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetDriverModel&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlDriverModel_t</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>
    
<div class="viewcode-block" id="nvmlDeviceSetAutoBoostedClocksEnabled"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetAutoBoostedClocksEnabled">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetAutoBoostedClocksEnabled</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">enabled</span><span class="p">):</span> 
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetAutoBoostedClocksEnabled&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlEnableState_t</span><span class="p">(</span><span class="n">enabled</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>
    <span class="c1">#Throws NVML_ERROR_NOT_SUPPORTED if hardware doesn&#39;t support setting auto boosted clocks</span>

<div class="viewcode-block" id="nvmlDeviceSetDefaultAutoBoostedClocksEnabled"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetDefaultAutoBoostedClocksEnabled">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetDefaultAutoBoostedClocksEnabled</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">enabled</span><span class="p">,</span> <span class="n">flags</span><span class="p">):</span> 
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetDefaultAutoBoostedClocksEnabled&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlEnableState_t</span><span class="p">(</span><span class="n">enabled</span><span class="p">),</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">flags</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>
    <span class="c1">#Throws NVML_ERROR_NOT_SUPPORTED if hardware doesn&#39;t support setting auto boosted clocks</span>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceSetApplicationsClocks"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetApplicationsClocks">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetApplicationsClocks</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">maxMemClockMHz</span><span class="p">,</span> <span class="n">maxGraphicsClockMHz</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetApplicationsClocks&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">maxMemClockMHz</span><span class="p">),</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">maxGraphicsClockMHz</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>
    
<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceResetApplicationsClocks"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceResetApplicationsClocks">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceResetApplicationsClocks</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceResetApplicationsClocks&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceSetPowerManagementLimit"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetPowerManagementLimit">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetPowerManagementLimit</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">limit</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetPowerManagementLimit&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">limit</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>
    
<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceSetGpuOperationMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetGpuOperationMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetGpuOperationMode</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetGpuOperationMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlGpuOperationMode_t</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlEventSetCreate"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlEventSetCreate">[docs]</a><span class="k">def</span> <span class="nf">nvmlEventSetCreate</span><span class="p">():</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlEventSetCreate&quot;</span><span class="p">)</span>
    <span class="n">eventSet</span> <span class="o">=</span> <span class="n">c_nvmlEventSet_t</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">byref</span><span class="p">(</span><span class="n">eventSet</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">eventSet</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlDeviceRegisterEvents"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceRegisterEvents">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceRegisterEvents</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">eventTypes</span><span class="p">,</span> <span class="n">eventSet</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceRegisterEvents&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_ulonglong</span><span class="p">(</span><span class="n">eventTypes</span><span class="p">),</span> <span class="n">eventSet</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlDeviceGetSupportedEventTypes"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetSupportedEventTypes">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetSupportedEventTypes</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_eventTypes</span> <span class="o">=</span> <span class="n">c_ulonglong</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetSupportedEventTypes&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_eventTypes</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_eventTypes</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 2.285</span>
<span class="c1"># raises NVML_ERROR_TIMEOUT exception on timeout</span>
<div class="viewcode-block" id="nvmlEventSetWait"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlEventSetWait">[docs]</a><span class="k">def</span> <span class="nf">nvmlEventSetWait</span><span class="p">(</span><span class="n">eventSet</span><span class="p">,</span> <span class="n">timeoutms</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlEventSetWait&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">c_nvmlEventData_t</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">eventSet</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">timeoutms</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data</span></div>

<span class="c1"># Added in 2.285</span>
<div class="viewcode-block" id="nvmlEventSetFree"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlEventSetFree">[docs]</a><span class="k">def</span> <span class="nf">nvmlEventSetFree</span><span class="p">(</span><span class="n">eventSet</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlEventSetFree&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">eventSet</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<span class="c1"># Added in 3.295</span>
<div class="viewcode-block" id="nvmlDeviceOnSameBoard"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceOnSameBoard">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceOnSameBoard</span><span class="p">(</span><span class="n">handle1</span><span class="p">,</span> <span class="n">handle2</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceOnSameBoard&quot;</span><span class="p">)</span>
    <span class="n">onSameBoard</span> <span class="o">=</span> <span class="n">c_int</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle1</span><span class="p">,</span> <span class="n">handle2</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">onSameBoard</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">onSameBoard</span><span class="o">.</span><span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span></div>

<span class="c1"># Added in 3.295</span>
<div class="viewcode-block" id="nvmlDeviceGetCurrPcieLinkGeneration"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetCurrPcieLinkGeneration">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetCurrPcieLinkGeneration</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetCurrPcieLinkGeneration&quot;</span><span class="p">)</span>
    <span class="n">gen</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">gen</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">gen</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 3.295</span>
<div class="viewcode-block" id="nvmlDeviceGetMaxPcieLinkGeneration"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetMaxPcieLinkGeneration">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetMaxPcieLinkGeneration</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetMaxPcieLinkGeneration&quot;</span><span class="p">)</span>
    <span class="n">gen</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">gen</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">gen</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 3.295</span>
<div class="viewcode-block" id="nvmlDeviceGetCurrPcieLinkWidth"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetCurrPcieLinkWidth">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetCurrPcieLinkWidth</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetCurrPcieLinkWidth&quot;</span><span class="p">)</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">width</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">width</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 3.295</span>
<div class="viewcode-block" id="nvmlDeviceGetMaxPcieLinkWidth"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetMaxPcieLinkWidth">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetMaxPcieLinkWidth</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetMaxPcieLinkWidth&quot;</span><span class="p">)</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">width</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">width</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetSupportedClocksThrottleReasons"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetSupportedClocksThrottleReasons">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetSupportedClocksThrottleReasons</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_reasons</span><span class="o">=</span> <span class="n">c_ulonglong</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetSupportedClocksThrottleReasons&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_reasons</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_reasons</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 4.304</span>
<div class="viewcode-block" id="nvmlDeviceGetCurrentClocksThrottleReasons"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetCurrentClocksThrottleReasons">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetCurrentClocksThrottleReasons</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_reasons</span><span class="o">=</span> <span class="n">c_ulonglong</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetCurrentClocksThrottleReasons&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_reasons</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_reasons</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 5.319</span>
<div class="viewcode-block" id="nvmlDeviceGetIndex"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetIndex">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetIndex</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetIndex&quot;</span><span class="p">)</span>
    <span class="n">c_index</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_index</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_index</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Added in 5.319</span>
<div class="viewcode-block" id="nvmlDeviceGetAccountingMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetAccountingMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetAccountingMode</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">c_mode</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetAccountingMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_mode</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_mode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceSetAccountingMode"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetAccountingMode">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetAccountingMode</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetAccountingMode&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlEnableState_t</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="nvmlDeviceClearAccountingPids"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceClearAccountingPids">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceClearAccountingPids</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceClearAccountingPids&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="nvmlDeviceGetAccountingStats"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetAccountingStats">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetAccountingStats</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">pid</span><span class="p">):</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">c_nvmlAccountingStats_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetAccountingStats&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">pid</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">stats</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">stats</span><span class="o">.</span><span class="n">maxMemoryUsage</span> <span class="o">==</span> <span class="n">NVML_VALUE_NOT_AVAILABLE_ulonglong</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="c1"># special case for WDDM on Windows, see comment above</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">maxMemoryUsage</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">stats</span></div>

<div class="viewcode-block" id="nvmlDeviceGetAccountingPids"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetAccountingPids">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetAccountingPids</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="n">nvmlDeviceGetAccountingBufferSize</span><span class="p">(</span><span class="n">handle</span><span class="p">))</span>
    <span class="n">pids</span> <span class="o">=</span> <span class="p">(</span><span class="n">c_uint</span> <span class="o">*</span> <span class="n">count</span><span class="o">.</span><span class="n">value</span><span class="p">)()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetAccountingPids&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">count</span><span class="p">),</span> <span class="n">pids</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">pids</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">count</span><span class="o">.</span><span class="n">value</span><span class="p">])</span> </div>

<div class="viewcode-block" id="nvmlDeviceGetAccountingBufferSize"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetAccountingBufferSize">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetAccountingBufferSize</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">bufferSize</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetAccountingBufferSize&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">bufferSize</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">bufferSize</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetRetiredPages"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetRetiredPages">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetRetiredPages</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">sourceFilter</span><span class="p">):</span>
    <span class="n">c_source</span> <span class="o">=</span> <span class="n">_nvmlPageRetirementCause_t</span><span class="p">(</span><span class="n">sourceFilter</span><span class="p">)</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetRetiredPages&quot;</span><span class="p">)</span>
    
    <span class="c1"># First call will get the size</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">c_source</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
    
    <span class="c1"># this should only fail with insufficient size</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="n">NVML_SUCCESS</span> <span class="ow">and</span>
        <span class="n">ret</span> <span class="o">!=</span> <span class="n">NVML_ERROR_INSUFFICIENT_SIZE</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>

    <span class="c1"># call again with a buffer</span>
    <span class="c1"># oversize the array for the rare cases where additional pages</span>
    <span class="c1"># are retired between NVML calls</span>
    <span class="n">c_count</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span>
    <span class="n">page_array</span> <span class="o">=</span> <span class="n">c_ulonglong</span> <span class="o">*</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span>
    <span class="n">c_pages</span> <span class="o">=</span> <span class="n">page_array</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">c_source</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="n">c_pages</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">c_pages</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">])</span></div>

<div class="viewcode-block" id="nvmlDeviceGetRetiredPagesPendingStatus"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetRetiredPagesPendingStatus">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetRetiredPagesPendingStatus</span><span class="p">(</span><span class="n">device</span><span class="p">):</span>
    <span class="n">c_pending</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetRetiredPagesPendingStatus&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_pending</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">c_pending</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceGetAPIRestriction"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetAPIRestriction">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetAPIRestriction</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">apiType</span><span class="p">):</span>
    <span class="n">c_permission</span> <span class="o">=</span> <span class="n">_nvmlEnableState_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetAPIRestriction&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">_nvmlRestrictedAPI_t</span><span class="p">(</span><span class="n">apiType</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_permission</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">c_permission</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlDeviceSetAPIRestriction"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceSetAPIRestriction">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceSetAPIRestriction</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">apiType</span><span class="p">,</span> <span class="n">isRestricted</span><span class="p">):</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceSetAPIRestriction&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">_nvmlRestrictedAPI_t</span><span class="p">(</span><span class="n">apiType</span><span class="p">),</span> <span class="n">_nvmlEnableState_t</span><span class="p">(</span><span class="n">isRestricted</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="nvmlDeviceGetBridgeChipInfo"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetBridgeChipInfo">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetBridgeChipInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">):</span>
    <span class="n">bridgeHierarchy</span> <span class="o">=</span> <span class="n">c_nvmlBridgeChipHierarchy_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetBridgeChipInfo&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">bridgeHierarchy</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bridgeHierarchy</span></div>

<div class="viewcode-block" id="nvmlDeviceGetSamples"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetSamples">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetSamples</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">sampling_type</span><span class="p">,</span> <span class="n">timeStamp</span><span class="p">):</span>
    <span class="n">c_sampling_type</span> <span class="o">=</span> <span class="n">_nvmlSamplingType_t</span><span class="p">(</span><span class="n">sampling_type</span><span class="p">)</span>
    <span class="n">c_time_stamp</span> <span class="o">=</span> <span class="n">c_ulonglong</span><span class="p">(</span><span class="n">timeStamp</span><span class="p">)</span>
    <span class="n">c_sample_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">c_sample_value_type</span> <span class="o">=</span> <span class="n">_nvmlValueType_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetSamples&quot;</span><span class="p">)</span>

    <span class="c1">## First Call gets the size</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">c_sampling_type</span><span class="p">,</span> <span class="n">c_time_stamp</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_sample_value_type</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_sample_count</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>

    <span class="c1"># Stop if this fails</span>
    <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="n">NVML_SUCCESS</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>

    <span class="n">sampleArray</span> <span class="o">=</span> <span class="n">c_sample_count</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">c_nvmlSample_t</span>
    <span class="n">c_samples</span> <span class="o">=</span> <span class="n">sampleArray</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">c_sampling_type</span><span class="p">,</span> <span class="n">c_time_stamp</span><span class="p">,</span>  <span class="n">byref</span><span class="p">(</span><span class="n">c_sample_value_type</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_sample_count</span><span class="p">),</span> <span class="n">c_samples</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">c_sample_value_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">c_samples</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">c_sample_count</span><span class="o">.</span><span class="n">value</span><span class="p">])</span></div>

<div class="viewcode-block" id="nvmlDeviceGetViolationStatus"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetViolationStatus">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetViolationStatus</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">perfPolicyType</span><span class="p">):</span>
    <span class="n">c_perfPolicy_type</span> <span class="o">=</span> <span class="n">_nvmlPerfPolicyType_t</span><span class="p">(</span><span class="n">perfPolicyType</span><span class="p">)</span>
    <span class="n">c_violTime</span> <span class="o">=</span> <span class="n">c_nvmlViolationTime_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetViolationStatus&quot;</span><span class="p">)</span>

    <span class="c1">## Invoke the method to get violation time</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">c_perfPolicy_type</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_violTime</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_violTime</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="nvmlDeviceGetPcieThroughput"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetPcieThroughput">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetPcieThroughput</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
    <span class="n">c_util</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetPcieThroughput&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">_nvmlPcieUtilCounter_t</span><span class="p">(</span><span class="n">counter</span><span class="p">),</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_util</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_util</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="nvmlSystemGetTopologyGpuSet"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlSystemGetTopologyGpuSet">[docs]</a><span class="k">def</span> <span class="nf">nvmlSystemGetTopologyGpuSet</span><span class="p">(</span><span class="n">cpuNumber</span><span class="p">):</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlSystemGetTopologyGpuSet&quot;</span><span class="p">)</span>

    <span class="c1"># First call will get the size</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">cpuNumber</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="n">NVML_SUCCESS</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># call again with a buffer</span>
    <span class="n">device_array</span> <span class="o">=</span> <span class="n">c_nvmlDevice_t</span> <span class="o">*</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span>
    <span class="n">c_devices</span> <span class="o">=</span> <span class="n">device_array</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">cpuNumber</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="n">c_devices</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">c_devices</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">])</span></div>

<div class="viewcode-block" id="nvmlDeviceGetTopologyNearestGpus"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetTopologyNearestGpus">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetTopologyNearestGpus</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">level</span><span class="p">):</span>
    <span class="n">c_count</span> <span class="o">=</span> <span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetTopologyNearestGpus&quot;</span><span class="p">)</span>

    <span class="c1"># First call will get the size</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="n">NVML_SUCCESS</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NVMLError</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>

    <span class="c1"># call again with a buffer</span>
    <span class="n">device_array</span> <span class="o">=</span> <span class="n">c_nvmlDevice_t</span> <span class="o">*</span> <span class="n">c_count</span><span class="o">.</span><span class="n">value</span>
    <span class="n">c_devices</span> <span class="o">=</span> <span class="n">device_array</span><span class="p">()</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_count</span><span class="p">),</span> <span class="n">c_devices</span><span class="p">)</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">c_devices</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">c_count</span><span class="o">.</span><span class="n">value</span><span class="p">])</span></div>

<div class="viewcode-block" id="nvmlDeviceGetTopologyCommonAncestor"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.nvmlDeviceGetTopologyCommonAncestor">[docs]</a><span class="k">def</span> <span class="nf">nvmlDeviceGetTopologyCommonAncestor</span><span class="p">(</span><span class="n">device1</span><span class="p">,</span> <span class="n">device2</span><span class="p">):</span>
    <span class="n">c_level</span> <span class="o">=</span> <span class="n">_nvmlGpuTopologyLevel_t</span><span class="p">()</span>
    <span class="n">fn</span> <span class="o">=</span> <span class="n">_nvmlGetFunctionPointer</span><span class="p">(</span><span class="s2">&quot;nvmlDeviceGetTopologyCommonAncestor&quot;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="n">device1</span><span class="p">,</span> <span class="n">device2</span><span class="p">,</span> <span class="n">byref</span><span class="p">(</span><span class="n">c_level</span><span class="p">))</span>
    <span class="n">_nvmlCheckReturn</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ensureUtfEncoding</span><span class="p">(</span><span class="n">c_level</span><span class="o">.</span><span class="n">value</span><span class="p">)</span></div>

<span class="c1"># Helper Functions</span>

<div class="viewcode-block" id="ensureUtfEncoding"><a class="viewcode-back" href="../../../../source/watchme.watchers.gpu.html#watchme.watchers.gpu.pynvml.ensureUtfEncoding">[docs]</a><span class="k">def</span> <span class="nf">ensureUtfEncoding</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="c1"># Ensure we return correct endoding</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Vanessa Sochat

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>